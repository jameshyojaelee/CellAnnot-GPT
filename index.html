<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>GPT Cell Annotator for R • gptcellannotator</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="GPT Cell Annotator for R">
<meta name="description" content="R interface to the GPT Cell Annotator backend with Seurat integration, validation guardrails, and offline CLI support.
">
<meta property="og:description" content="R interface to the GPT Cell Annotator backend with Seurat integration, validation guardrails, and offline CLI support.
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">gptcellannotator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="articles/annotate-seurat.html">Seurat vignette</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jameshyojaelee/CellAnnot-GPT" aria-label="GitHub repository"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="gptcellannotator">gptcellannotator<a class="anchor" aria-label="anchor" href="#gptcellannotator"></a>
</h1></div>
<p><code>gptcellannotator</code> connects Seurat workflows to the GPT Cell Annotator backend. It ships a streamlined R API with validation guardrails, plotting helpers, and an offline CLI fallback.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Ensure you have an R 4.3 environment with development headers for <code>libcurl</code>, <code>openssl</code>, and <code>xml2</code>, plus Pandoc ≥ 2.11 for vignettes. On macOS install the Xcode command line tools; on Windows install <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">Rtools42</a>.</p>
<div class="section level3">
<h3 id="github-source-pak-or-remotes">GitHub source (pak or remotes)<a class="anchor" aria-label="anchor" href="#github-source-pak-or-remotes"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pak automatically resolves system + R dependencies</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://pak.r-lib.org/" class="external-link">"pak"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"github::jameshyojaelee/CellAnnot-GPT@main?subdir=clients/r/gptcellannotator"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or use remotes / devtools</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"jameshyojaelee/CellAnnot-GPT"</span>, subdir <span class="op">=</span> <span class="st">"clients/r/gptcellannotator"</span>, build <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Run the helper script if you prefer a single command:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">Rscript</span> clients/r/scripts/install_github.R</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="local-source-tarball">Local source tarball<a class="anchor" aria-label="anchor" href="#local-source-tarball"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">R</span> CMD build clients/r/gptcellannotator</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">R</span> CMD INSTALL gptcellannotator_0.1.0.tar.gz</span></code></pre></div>
<p>The script <code>clients/r/scripts/install_local_tarball.R</code> automates those steps with <code><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pak::pkg_install()</a></code> while caching dependencies.</p>
</div>
<div class="section level3">
<h3 id="future-cran-release">Future CRAN release<a class="anchor" aria-label="anchor" href="#future-cran-release"></a>
</h3>
<p>The package is staged for CRAN review. Once accepted, installation will become a single step:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"gptcellannotator"</span><span class="op">)</span></span></code></pre></div>
<p>Until then, rely on the GitHub source or the source tarballs generated by CI.</p>
</div>
<div class="section level3">
<h3 id="optional-python-cli">Optional Python CLI<a class="anchor" aria-label="anchor" href="#optional-python-cli"></a>
</h3>
<p>Offline annotations require the Python CLI (handled by the R package automatically when available):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">pip</span> install gpt-cell-annotator</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jameshyojaelee/CellAnnot-GPT" class="external-link">gptcellannotator</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gptca_config.html">gptca_config</a></span><span class="op">(</span>base_url <span class="op">=</span> <span class="st">"https://api.gpt-cell-annotator.org"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/gptca_config.html">gptca_config_set</a></span><span class="op">(</span><span class="va">cfg</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pbmc_markers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pbmc_markers.csv"</span>, package <span class="op">=</span> <span class="st">"gptcellannotator"</span><span class="op">)</span></span>
<span><span class="va">markers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">pbmc_markers</span><span class="op">)</span></span>
<span></span>
<span><span class="va">annotations</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gptca_annotate.html">gptca_annotate_markers</a></span><span class="op">(</span></span>
<span>  <span class="va">markers</span>,</span>
<span>  species <span class="op">=</span> <span class="st">"Homo sapiens"</span>,</span>
<span>  return_validated <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">annotations</span><span class="op">$</span><span class="va">clusters</span></span></code></pre></div>
<div class="section level3">
<h3 id="seurat-pipeline">Seurat pipeline<a class="anchor" aria-label="anchor" href="#seurat-pipeline"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://satijalab.org/seurat" class="external-link">Seurat</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">pbmc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"path/to/pbmc.rds"</span><span class="op">)</span>            <span class="co"># replace with your Seurat object</span></span>
<span><span class="va">markers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://satijalab.org/seurat/reference/FindAllMarkers.html" class="external-link">FindAllMarkers</a></span><span class="op">(</span><span class="va">pbmc</span><span class="op">)</span>                <span class="co"># positive markers only</span></span>
<span></span>
<span><span class="va">annotations</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gptca_annotate.html">gptca_annotate_seurat</a></span><span class="op">(</span></span>
<span>  <span class="va">pbmc</span>,</span>
<span>  markers <span class="op">=</span> <span class="va">markers</span>,</span>
<span>  species <span class="op">=</span> <span class="st">"Homo sapiens"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">pbmc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gptca_annotate.html">gptca_add_metadata</a></span><span class="op">(</span><span class="va">pbmc</span>, <span class="va">annotations</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/gptca_annotate.html">gptca_plot_umap</a></span><span class="op">(</span><span class="va">pbmc</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="offline-fallback">Offline fallback<a class="anchor" aria-label="anchor" href="#offline-fallback"></a>
</h3>
<p>Set <code>offline = TRUE</code> or export <code>GPTCA_CLI_PATH</code> pointing to the <code>gca</code> binary. The package will write markers to a temp CSV, call <code>gca annotate</code>, and parse the structured JSON output.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gptca_config.html">gptca_config</a></span><span class="op">(</span>offline <span class="op">=</span> <span class="cn">TRUE</span>, cli_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></span><span class="op">(</span><span class="st">"gca"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">annotations</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gptca_annotate.html">gptca_annotate_markers</a></span><span class="op">(</span><span class="va">markers</span>, config <span class="op">=</span> <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h2>
<ul>
<li>
<code>GPTCA_BASE_URL</code> and <code>GPTCA_API_KEY</code> override defaults.</li>
<li>Tune timeouts and retries with <code>gptca_config(timeout = 45, retry_max = 5)</code>.</li>
<li>All exported functions accept a <code>config</code> override for ad-hoc sessions.</li>
</ul>
</div>
<div class="section level2">
<h2 id="validation-and-guardrails">Validation and guardrails<a class="anchor" aria-label="anchor" href="#validation-and-guardrails"></a>
</h2>
<p>Validated responses include:</p>
<ul>
<li>Per-cluster <code>status</code> (<code>supported</code>, <code>flagged</code>, <code>unknown</code>)</li>
<li>Canonical markers and ontology identifiers</li>
<li>Validation notes (<code>missing_markers</code>, <code>contradictory_markers</code>)</li>
<li>Warning strings surfaced in Seurat metadata</li>
</ul>
<p>Use <code>annotations$raw</code> to inspect the full JSON payload.</p>
</div>
<div class="section level2">
<h2 id="rate-limits--costs">Rate limits &amp; costs<a class="anchor" aria-label="anchor" href="#rate-limits--costs"></a>
</h2>
<p>The backend relies on OpenAI APIs. Keep marker batches small, reuse caching, and add pauses when parallelising to respect rate limits. Never share API keys in saved objects or public repos.</p>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<ul>
<li>Open an issue: <a href="https://github.com/jameshyojaelee/CellAnnot-GPT/issues" class="external-link uri">https://github.com/jameshyojaelee/CellAnnot-GPT/issues</a>
</li>
<li>Internal docs: <code><a href="articles/annotate-seurat.html">vignette("annotate-seurat", package = "gptcellannotator")</a></code>
</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jameshyojaelee/CellAnnot-GPT/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jameshyojaelee/CellAnnot-GPT/issues" class="external-link">Report a bug</a></li>
<li><a href="https://github.com/jameshyojaelee/CellAnnot-GPT/blob/main/docs/seurat_integration.md" class="external-link">Seurat workflow guide</a></li>
<li><a href="https://github.com/jameshyojaelee/CellAnnot-GPT/blob/main/docs/scanpy_integration.md" class="external-link">Scanpy integration</a></li>
<li><a href="https://github.com/jameshyojaelee/CellAnnot-GPT/blob/main/schemas/api/openapi.yaml" class="external-link">REST API schema</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing gptcellannotator</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>GPT Cell Annotator Team <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by GPT Cell Annotator Team.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
